<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Pawtopia æ¡Œæ©Ÿç‰ˆ</title>
<style>
body{
  font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
  background: linear-gradient(180deg,#ede9fe,#fdfcff);
  margin:0; padding:24px;
}
.container{
  max-width:1200px; margin:auto; background:white;
  padding:24px; border-radius:24px;
  box-shadow:0 10px 30px rgba(0,0,0,.12);
}
h1{text-align:center;margin-bottom:20px}
.main-layout{display:grid;grid-template-columns:360px 1fr;gap:24px}
.panel{background:#fafafa;border-radius:20px;padding:16px}
.bar{ height:14px; background:#e5e7eb; border-radius:8px; overflow:hidden; margin-top:6px; }
.fill{ height:100%; background:linear-gradient(90deg,#22c55e,#4ade80); transition:width .3s; }
button{padding:10px 16px;border:none;border-radius:14px;cursor:pointer;background:#6366f1;color:white}
.actions{display:flex;gap:12px;margin-top:16px}
.actions button{flex:1}
.mission li{background:white;padding:10px 14px;border-radius:14px;margin-bottom:8px;display:flex;justify-content:space-between}
.log ul{max-height:220px;overflow-y:auto;padding-left:18px}
.meta{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.levelbox{background:#eef2ff;padding:6px 10px;border-radius:12px}
.small{font-size:13px;color:#555}

.dogChoice{width:90px;height:90px;border-radius:16px;object-fit:cover;cursor:pointer;border:3px solid transparent;transition:.2s}
.dogChoice.selected{border-color:#6366f1;transform:scale(1.08)}

.modal.hidden{display:none}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;z-index:999}
.modal-content{background:white;width:420px;padding:24px;border-radius:24px;text-align:center}

.day-transition{animation:flash .8s}
@keyframes flash{from{background:#fff7ed;}to{background:transparent;}}
</style>
</head>
<body>

<div id="introModal" class="modal hidden">
  <div class="modal-content">
    <h2>ğŸ¶ Pawtopia éŠæˆ²èªªæ˜</h2>
    <p class="small" style="line-height:1.6">
      ãƒ»æ¯å¤©æœ‰ <b>7 å€‹ä»»å‹™</b><br>
      ãƒ»å®Œæˆå…¨éƒ¨ä»»å‹™æœƒç›´æ¥é€²å…¥ä¸‹ä¸€å¤©<br>
      ãƒ»å¤©æ•¸è¶Šå¤šï¼Œç‹—ç‹—è¶Šå¼·ï¼
    </p>
    <button onclick="closeIntro()">é–‹å§‹éŠæˆ²</button>
  </div>
</div>

<div id="newDayModal" class="modal hidden">
  <div class="modal-content">
    <h2 id="newDayText"></h2>
    <button onclick="closeNewDay()">ç¹¼çºŒ</button>
  </div>
</div>

<div class="container">
<h1>Pawtopia</h1>

<div id="namingArea">
  <h3>ç‹—ç‹—åå­—</h3>
  <input id="dogNameInput" style="width:100%;padding:10px;border-radius:12px;border:1px solid #ddd" />
  <h3 style="margin-top:16px">é¸æ“‡å¤–è§€</h3>
  <div style="display:flex;gap:12px">
    <img src="Kiss Me!!!!.jpg" data-dog="Kiss Me!!!!.jpg" class="dogChoice">
    <img src="ä¸‹è¼‰ (2).jpg" data-dog="ä¸‹è¼‰ (2).jpg" class="dogChoice">
    <img src="ä¸‹è¼‰ (3).jpg" data-dog="ä¸‹è¼‰ (3).jpg" class="dogChoice">
  </div>
  <button style="margin-top:16px" onclick="startGame()">é–‹å§‹éŠæˆ²</button>
</div>

<div id="gameArea" style="display:none">
  <div class="main-layout">
    <div class="panel">
      <div class="meta">
        <div>
          <b id="dogTitle"></b>
          <div class="small" id="dayDisplay">ç¬¬ 1 å¤©</div>
        </div>
        <div class="levelbox">Lv <span id="dogLevel">1</span></div>
      </div>
      <img id="mainDogImg" style="width:100%;border-radius:20px">
      <div class="stats" style="margin-top:16px">
        <div>ğŸ˜Š å¿«æ¨‚ <span id="happyValue">70</span>%<div class="bar"><div id="happyBar" class="fill" style="width:70%"></div></div></div>
        <div>ğŸ– é£½è¶³æ„Ÿ <span id="hungerValue">30</span>%<div class="bar"><div id="hungerBar" class="fill" style="width:30%"></div></div></div>
        <div>âš¡ èƒ½é‡ <span id="energyValue">60</span>%<div class="bar"><div id="energyBar" class="fill" style="width:60%"></div></div></div>
      </div>
    </div>

    <div class="panel">
      <div class="actions">
        <button onclick="act('é¤µé£Ÿ')">é¤µé£Ÿ</button>
        <button onclick="act('ç©è€')">ç©è€</button>
        <button onclick="act('ç¡è¦º')">ç¡è¦º</button>
      </div>
      <div class="mission" style="margin-top:20px">
        <h3>ä»Šæ—¥ä»»å‹™</h3>
        <ul id="missionList"></ul>
      </div>
      <div class="log" style="margin-top:20px">
        <h3>æ—¥èªŒ</h3>
        <ul id="logList"></ul>
      </div>
    </div>
  </div>
</div>
</div>

<script>
const dog={name:'',happiness:70,hunger:30,energy:60,level:1};
let day=1;
let selectedDogImg='';
let missions=[];

const el=id=>document.getElementById(id);
const log=m=>{const li=document.createElement('li');li.textContent=m;el('logList').prepend(li)};

function updateStats(){
  el('happyValue').textContent=dog.happiness;
  el('hungerValue').textContent=dog.hunger;
  el('energyValue').textContent=dog.energy;
  el('happyBar').style.width=dog.happiness+'%';
  el('hungerBar').style.width=dog.hunger+'%';
  el('energyBar').style.width=dog.energy+'%';
  if(dog.happiness<=0||dog.hunger<=0||dog.energy<=0){alert('âš ï¸ ç‹—ç‹—ç‹€æ…‹éä½ï¼');}
}

function generateMissions(){
  const types=['é¤µé£Ÿ','ç©è€','ç¡è¦º'];
  const counts={é¤µé£Ÿ:0,ç©è€:0,ç¡è¦º:0};
  missions=[];
  while(missions.length<7){
    const t=types[Math.floor(Math.random()*3)];
    if(counts[t]>=3) continue;
    counts[t]++;
    missions.push({type:t,done:0,target:1});
  }
  renderMissions();
}

function renderMissions(){
  const ul=el('missionList'); ul.innerHTML='';
  missions.forEach(m=>{
    const li=document.createElement('li');
    li.innerHTML=`${m.type} <span>${m.done}/${m.target}</span>`;
    ul.appendChild(li);
  });
}

function act(type){
  if(type==='é¤µé£Ÿ'){dog.hunger=Math.min(100,dog.hunger+20);dog.happiness+=5}
  if(type==='ç©è€'){dog.happiness+=15;dog.energy-=15}
  if(type==='ç¡è¦º'){dog.energy+=30}
  const m=missions.find(x=>x.type===type&&x.done<x.target);
  if(m){m.done++;log(type+' å®Œæˆ');}
  updateStats();renderMissions();
  if(missions.every(m=>m.done>=m.target)) nextDay();
}

function nextDay(){
  day++; dog.happiness=0;
  el('newDayText').textContent=`ğŸŒ… ç¬¬ ${day} å¤©é–‹å§‹ï¼`;
  el('newDayModal').classList.remove('hidden');
  el('dayDisplay').textContent=`ç¬¬ ${day} å¤©`;
  generateMissions();
}

function startGame(){
  const name=el('dogNameInput').value.trim();
  if(!name||!selectedDogImg){alert('è«‹å®Œæˆåå­—èˆ‡å¤–è§€');return;}
  dog.name=name; el('dogTitle').textContent=name;
  el('mainDogImg').src=selectedDogImg;
  el('namingArea').style.display='none';
  el('gameArea').style.display='block';
  el('introModal').classList.remove('hidden');
  generateMissions(); updateStats(); log(name+' é–‹å§‹å†’éšªï¼');
}

function closeIntro(){el('introModal').classList.add('hidden')}
function closeNewDay(){el('newDayModal').classList.add('hidden')}

document.querySelectorAll('.dogChoice').forEach(img=>{
  img.onclick=()=>{
    selectedDogImg=img.dataset.dog;
    document.querySelectorAll('.dogChoice').forEach(i=>i.classList.remove('selected'));
    img.classList.add('selected');
  }
});
</script>
</body>
</html>
