<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>Pawtopia</title>
<style>
body{
  font-family:system-ui;
  background:#eef2ff;
  margin:0;padding:20px;
}
.container{
  max-width:900px;
  margin:auto;
  background:#fff;
  border-radius:20px;
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,.1);
}
.top{display:flex;justify-content:space-between;align-items:center;}
.main{
  display:grid;
  grid-template-columns:300px 1fr;
  gap:20px;
  margin-top:16px;
}
img#dogImg{
  width:100%;
  border-radius:20px;
  object-fit:cover;
}
.bar{height:12px;background:#e5e7eb;border-radius:6px;overflow:hidden}
.fill{height:100%;background:#4ade80}
button{
  padding:10px;border:none;border-radius:12px;
  background:#6366f1;color:white;cursor:pointer;
}
button:disabled{opacity:.4;cursor:not-allowed}
.mission li{
  display:flex;justify-content:space-between;
  background:#f8fafc;
  padding:8px 12px;
  border-radius:10px;margin-bottom:6px;
}
.modal{
  position:fixed;inset:0;
  background:rgba(0,0,0,.4);
  display:flex;align-items:center;justify-content:center;
}
.hidden{display:none}
.modal-content{
  background:white;
  padding:24px;
  border-radius:20px;
  text-align:center;
}
.dogChoice{
  width:70px;height:70px;
  border-radius:14px;
  object-fit:cover;
  cursor:pointer;
  border:3px solid transparent;
}
.dogChoice.selected{border-color:#6366f1}
</style>
</head>
<body>

<div id="intro" class="modal hidden">
  <div class="modal-content">
    <h2>ğŸ¶ éŠæˆ²èªªæ˜</h2>
    <p>
      â€¢ æ¯å¤© 7 å€‹ä»»å‹™<br>
      â€¢ å®Œæˆå…¨éƒ¨ä»»å‹™ â†’ æ–°çš„ä¸€å¤©<br>
      â€¢ å¿«æ¨‚æ¯å¤©æ­¸é›¶
    </p>
    <button onclick="closeIntro()">é–‹å§‹</button>
  </div>
</div>

<div id="newDay" class="modal hidden">
  <div class="modal-content">
    <h2 id="dayText"></h2>
    <button onclick="closeNewDay()">ç¹¼çºŒ</button>
  </div>
</div>

<div class="container">

<div id="setup">
  <h2>å–åå­— & é¸å¤–è§€</h2>
  <input id="nameInput" placeholder="åå­—"><br><br>
  <img src="Kiss Me!!!!.jpg" class="dogChoice">
  <img src="ä¸‹è¼‰ (2).jpg" class="dogChoice">
  <img src="ä¸‹è¼‰ (3).jpg" class="dogChoice"><br><br>
  <button onclick="start()">é–‹å§‹éŠæˆ²</button>
</div>

<div id="game" class="hidden">
  <div class="top">
    <div id="title"></div>
    <div id="day">ç¬¬ 1 å¤©</div>
  </div>

  <div class="main">
    <img id="dogImg">

    <div>
      <div>ğŸ˜Š <span id="h">70</span>%<div class="bar"><div id="hb" class="fill"></div></div></div>
      <div>ğŸ– <span id="f">30</span>%<div class="bar"><div id="fb" class="fill"></div></div></div>
      <div>âš¡ <span id="e">60</span>%<div class="bar"><div id="eb" class="fill"></div></div></div>

      <div style="margin:12px 0">
        <button id="feed">é¤µé£Ÿ</button>
        <button id="play">ç©è€</button>
        <button id="sleep">ç¡è¦º</button>
      </div>

      <h3>ä»Šæ—¥ä»»å‹™</h3>
      <ul id="missions"></ul>
    </div>
  </div>
</div>
</div>

<script>
let dog={h:70,f:30,e:60,name:''};
let day=1,locked=false,selectedImg='';
let mission={feed:0,play:0,sleep:0,done:{feed:0,play:0,sleep:0}};

document.querySelectorAll('.dogChoice').forEach(img=>{
  img.onclick=()=>{
    selectedImg=img.src;
    document.querySelectorAll('.dogChoice').forEach(i=>i.classList.remove('selected'));
    img.classList.add('selected');
  };
});

function start(){
  if(!nameInput.value||!selectedImg)return alert('è«‹å®Œæˆè¨­å®š');
  dog.name=nameInput.value;
  title.textContent=dog.name;
  dogImg.src=selectedImg;
  setup.classList.add('hidden');
  game.classList.remove('hidden');
  intro.classList.remove('hidden');
  newMission();
  update();
}

function closeIntro(){intro.classList.add('hidden');}
function closeNewDay(){
  locked=false;
  newDay.classList.add('hidden');
  newMission();
}

function newMission(){
  mission={feed:0,play:0,sleep:0,done:{feed:0,play:0,sleep:0}};
  let left=7;
  ['feed','play','sleep'].forEach(t=>{
    mission[t]=Math.max(1,Math.min(3,Math.floor(Math.random()*3)+1));
    left-=mission[t];
  });
  mission.feed+=left;
  renderMission();
}

function renderMission(){
  missions.innerHTML='';
  ['feed','play','sleep'].forEach(t=>{
    let li=document.createElement('li');
    li.innerHTML=`${t} <span>${mission.done[t]}/${mission[t]}</span>`;
    missions.appendChild(li);
  });
}

function act(t){
  if(locked)return;
  if(t==='feed'){dog.f=Math.min(100,dog.f+20);}
  if(t==='play'){dog.h=Math.min(100,dog.h+15);dog.e=Math.max(0,dog.e-15);}
  if(t==='sleep'){dog.e=Math.min(100,dog.e+30);}
  mission.done[t]++;
  update();
  if(['feed','play','sleep'].every(x=>mission.done[x]>=mission[x])){
    locked=true;
    day++;
    dog.h=0;
    dayText.textContent=`ğŸŒ… ç¬¬ ${day} å¤©é–‹å§‹`;
    newDay.classList.remove('hidden');
    document.getElementById('day').textContent=`ç¬¬ ${day} å¤©`;
  }
}

function update(){
  h.textContent=dog.h; f.textContent=dog.f; e.textContent=dog.e;
  hb.style.width=dog.h+'%'; fb.style.width=dog.f+'%'; eb.style.width=dog.e+'%';
  renderMission();
}

feed.onclick=()=>act('feed');
play.onclick=()=>act('play');
sleep.onclick=()=>act('sleep');
</script>
</body>
</html>
