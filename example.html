<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Pawtopia é›»è…¦ç‰ˆï¼ˆå®Œæ•´ç‰ˆï¼‰</title>
<style>
body{
  font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
  background: linear-gradient(180deg,#ede9fe,#fdfcff);
  margin:0; padding:24px;
}
.container{
  max-width:900px; margin:auto; background:white;
  padding:24px; border-radius:20px;
  box-shadow:0 12px 30px rgba(0,0,0,.12);
}
h1{text-align:center;margin:0 0 16px}
.meta{display:flex;justify-content:space-between;align-items:center}
.stats,.actions,.mission,.log{margin-top:20px}
.bar{height:14px;background:#e5e7eb;border-radius:8px;overflow:hidden;margin-top:4px}
.fill{height:100%;background:linear-gradient(90deg,#22c55e,#4ade80);transition:.3s}
button{padding:10px 16px;border:none;border-radius:12px;cursor:pointer;background:#6366f1;color:#fff;font-size:15px}
.actions{display:flex;gap:12px}
.actions button{flex:1}
.mission li{background:#f8fafc;padding:10px 14px;border-radius:12px;margin-bottom:8px;display:flex;justify-content:space-between}
.log ul{max-height:160px;overflow-y:auto;padding-left:16px}
.levelbox{background:#eef2ff;padding:6px 12px;border-radius:10px}
.small{font-size:14px;color:#555}

.dogChoice{width:90px;height:90px;border-radius:16px;object-fit:cover;cursor:pointer;border:3px solid transparent;transition:.2s}
.dogChoice.selected{border-color:#6366f1;transform:scale(1.08)}

.modal.hidden{display:none}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;z-index:999}
.modal-content{background:white;padding:28px;border-radius:20px;max-width:420px;width:90%;text-align:center;animation:pop .25s}
@keyframes pop{from{transform:scale(.85);opacity:0}to{transform:scale(1);opacity:1}}

.day-transition{animation:flash .8s}
@keyframes flash{from{background:#fff7ed}to{background:transparent}}
</style>
</head>
<body>

<div id="introModal" class="modal hidden">
  <div class="modal-content">
    <h2>ğŸ¶ Pawtopia éŠæˆ²èªªæ˜</h2>
    <p style="line-height:1.7">
      â€¢ æ¯å¤©æœ‰ <b>7 æ¬¡ä»»å‹™</b><br>
      â€¢ ä»»å‹™åŒ…å«ï¼šé¤µé£Ÿ / ç©è€ / ç¡è¦º<br>
      â€¢ å®Œæˆæ‰€æœ‰ä»»å‹™ âœ é€²å…¥ä¸‹ä¸€å¤©<br>
      â€¢ æ–°çš„ä¸€å¤©å¿«æ¨‚å€¼æ­¸é›¶<br>
    </p>
    <button id="introBtn">é–‹å§‹ç…§é¡§ç‹—ç‹—</button>
  </div>
</div>

<div id="newDayModal" class="modal hidden">
  <div class="modal-content">
    <h2 id="newDayText"></h2>
    <button id="newDayBtn">ç¹¼çºŒ</button>
  </div>
</div>

<div id="warnModal" class="modal hidden">
  <div class="modal-content">
    <h2 id="warnText"></h2>
    <button onclick="document.getElementById('warnModal').classList.add('hidden')">çŸ¥é“äº†</button>
  </div>
</div>

<div class="container">
<h1>Pawtopia</h1>

<div id="namingArea">
  <h3>ç‹—ç‹—åå­—</h3>
  <input id="dogNameInput" placeholder="è¼¸å…¥åå­—" style="width:100%;padding:10px;border-radius:10px;border:1px solid #ddd">

  <h3 style="margin-top:14px">é¸æ“‡å¤–è§€</h3>
  <div style="display:flex;gap:16px;justify-content:center">
    <img src="Kiss Me!!!!.jpg" data-dog="Kiss Me!!!!.jpg" class="dogChoice">
    <img src="ä¸‹è¼‰ (2).jpg" data-dog="ä¸‹è¼‰ (2).jpg" class="dogChoice">
    <img src="ä¸‹è¼‰ (3).jpg" data-dog="ä¸‹è¼‰ (3).jpg" class="dogChoice">
  </div>
  <button id="startBtn" style="margin-top:20px;width:100%">é–‹å§‹éŠæˆ²</button>
</div>

<div id="gameArea" style="display:none">
  <div class="meta">
    <div>
      <div id="dogTitle" style="font-weight:600"></div>
      <div class="small" id="dayDisplay">ç¬¬ 1 å¤©</div>
    </div>
    <div class="levelbox">Lv <span id="dogLevel">1</span></div>
  </div>

  <!-- æ¡Œæ©Ÿå·¦å³ç‰ˆå‹ -->
  <div style="display:grid;grid-template-columns:260px 1fr;gap:20px;margin-top:16px;align-items:start">

    <!-- å·¦ï¼šç‹—ç‹— -->
    <div style="text-align:center">
      <img id="mainDogImg" style="width:100%;max-width:240px;border-radius:20px">
    </div>

    <!-- å³ï¼šç‹€æ…‹ / æ“ä½œ / ä»»å‹™ -->
    <div>
      <div class="stats">
        <div>ğŸ˜Š å¿«æ¨‚ <span id="happyValue">70</span>%<div class="bar"><div id="happyBar" class="fill" style="width:70%"></div></div></div>
        <div>ğŸ– é£½è¶³ <span id="hungerValue">30</span>%<div class="bar"><div id="hungerBar" class="fill" style="width:30%"></div></div></div>
        <div>âš¡ èƒ½é‡ <span id="energyValue">60</span>%<div class="bar"><div id="energyBar" class="fill" style="width:60%"></div></div></div>
      </div>

      <div class="actions">
        <button id="feedBtn">é¤µé£Ÿ</button>
        <button id="playBtn">ç©è€</button>
        <button id="sleepBtn">ç¡è¦º</button>
      </div>

      <div class="mission">
        <h3>ä»Šæ—¥ä»»å‹™</h3>
        <ul id="missionList"></ul>
        <p class="small">å®Œæˆå…¨éƒ¨ä»»å‹™å³å¯é€²å…¥ä¸‹ä¸€å¤©</p>
      </div>

      <div class="log">
        <h3>æ—¥èªŒ</h3>
        <ul id="logList"></ul>
      </div>
    </div>
  </div>
</div>
</div>
</div>

<script>
const dog={name:'',happiness:70,hunger:30,energy:60,level:1};
let day=1;
let selectedDogImg='';
let missions={};

const el=id=>document.getElementById(id);
const log=m=>{const li=document.createElement('li');li.textContent=m;el('logList').prepend(li)};

function clamp(){
  dog.happiness=Math.max(0,Math.min(100,dog.happiness));
  dog.hunger=Math.max(0,Math.min(100,dog.hunger));
  dog.energy=Math.max(0,Math.min(100,dog.energy));
}

function updateStats(){
  clamp();
  happyValue.textContent=dog.happiness;
  hungerValue.textContent=dog.hunger;
  energyValue.textContent=dog.energy;
  happyBar.style.width=dog.happiness+'%';
  hungerBar.style.width=dog.hunger+'%';
  energyBar.style.width=dog.energy+'%';
  if(dog.happiness<=10) warn('ç‹—ç‹—å¿«æ¨‚å¤ªä½ï¼');
  if(dog.hunger<=10) warn('ç‹—ç‹—å¿«é¤“å£äº†ï¼');
  if(dog.energy<=10) warn('ç‹—ç‹—å¿«æ²’åŠ›æ°£äº†ï¼');
}

function warn(t){ warnText.textContent=t; warnModal.classList.remove('hidden'); }

function generateMissions(){
  missions={é¤µé£Ÿ:{done:0,total:0},ç©è€:{done:0,total:0},ç¡è¦º:{done:0,total:0}};
  let remaining=7;
  while(remaining>0){
    const keys=Object.keys(missions);
    const k=keys[Math.floor(Math.random()*3)];
    if(missions[k].total>=3) continue;
    missions[k].total++; remaining--;
  }
  renderMissions();
}

function renderMissions(){
  missionList.innerHTML='';
  for(const k in missions){
    const m=missions[k];
    const li=document.createElement('li');
    li.innerHTML=`${k} <span>${m.done}/${m.total}</span>`;
    missionList.appendChild(li);
  }
}

function act(type){
  if(missions[type].done>=missions[type].total) return;
  if(type==='é¤µé£Ÿ'){dog.hunger+=20;dog.happiness+=5}
  if(type==='ç©è€'){dog.happiness+=15;dog.energy-=15}
  if(type==='ç¡è¦º'){dog.energy+=30}
  missions[type].done++;
  log(type+' å®Œæˆ');
  updateStats(); renderMissions();
  if(Object.values(missions).every(m=>m.done>=m.total)) newDay();
}

function newDay(){
  day++; dog.happiness=0;
  newDayText.textContent=`ğŸŒ… ç¬¬ ${day} å¤©é–‹å§‹ï¼`;
  newDayModal.classList.remove('hidden');
  dayDisplay.textContent=`ç¬¬ ${day} å¤©`;
  generateMissions();
}

newDayBtn.onclick=()=>newDayModal.classList.add('hidden');
introBtn.onclick=()=>introModal.classList.add('hidden');
feedBtn.onclick=()=>act('é¤µé£Ÿ');
playBtn.onclick=()=>act('ç©è€');
sleepBtn.onclick=()=>act('ç¡è¦º');

document.querySelectorAll('.dogChoice').forEach(img=>{
  img.addEventListener('click',()=>{
    selectedDogImg=img.dataset.dog;
    document.querySelectorAll('.dogChoice').forEach(i=>i.classList.remove('selected'));
    img.classList.add('selected');
  });
});

startBtn.onclick=()=>{
  const name=dogNameInput.value.trim();
  if(!name||!selectedDogImg){alert('è«‹è¼¸å…¥åå­—ä¸¦é¸æ“‡å¤–è§€');return}
  dog.name=name; dogTitle.textContent=name;
  mainDogImg.src=selectedDogImg;
  namingArea.style.display='none';
  gameArea.style.display='block';
  introModal.classList.remove('hidden');
  generateMissions(); updateStats(); log(name+' é–‹å§‹å†’éšªï¼');
};
</script>
</body>
</html>
