<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Pawtopia æ‰‹éŠç‰ˆ</title>
<style>
body{
  font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
  background: linear-gradient(180deg,#ede9fe,#fdfcff);
  margin:0; padding:16px;
}
.container{
  max-width:420px; margin:auto; background:white;
  padding:16px; border-radius:24px;
  box-shadow:0 10px 30px rgba(0,0,0,.12);
}
h1{text-align:center;margin:4px 0 12px}
.stats,.actions,.mission,.log{ margin-top:16px; }
.bar{ height:12px; background:#e5e7eb; border-radius:8px; overflow:hidden; margin-top:4px; }
.fill{ height:100%; background:linear-gradient(90deg,#22c55e,#4ade80); transition:width .3s; }
button{
  padding:12px; border:none; border-radius:16px; cursor:pointer;
  background:#6366f1; color:white; font-size:15px;
}
.actions{ display:flex; gap:10px; }
.actions button{ flex:1; }
.mission li{
  background:#f8fafc; padding:10px 12px; border-radius:14px;
  margin-bottom:8px; display:flex; justify-content:space-between;
}
.log ul{ max-height:120px; overflow-y:auto; padding-left:16px; }
.meta{ display:flex; justify-content:space-between; align-items:center; }
.levelbox,.xpbox{ font-size:13px; background:#eef2ff; padding:6px 10px; border-radius:12px; }
.small{ font-size:13px; color:#555; }

/* å¤–è§€é¸æ“‡ */
.dogChoice{
  width:80px; height:80px; border-radius:18px;
  object-fit:cover; cursor:pointer;
  border:3px solid transparent;
  transition:.2s;
}
.dogChoice.selected{ border-color:#6366f1; transform:scale(1.08); }

/* å½ˆçª— */
.modal.hidden{ display:none; }
.modal{
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  display:flex; justify-content:center; align-items:center; z-index:999;
}
.modal-content{
  background:white; width:85%; max-width:360px;
  padding:24px; border-radius:24px; text-align:center;
  animation:pop .25s ease;
}
@keyframes pop{ from{transform:scale(.8);opacity:0} to{transform:scale(1);opacity:1} }

.day-transition{ animation:flash .8s; }
@keyframes flash{ from{background:#fff7ed;} to{background:transparent;} }
</style>
</head>
<body>

<!-- æ•™å­¸å½ˆçª— -->
<div id="introModal" class="modal hidden">
  <div class="modal-content">
    <h2>ğŸ¶ æ­¡è¿ä¾†åˆ° Pawtopia</h2>
    <p style="font-size:14px;line-height:1.6">
      â€¢ æ¯å¤©éƒ½æœ‰ <b>7 å€‹è¡Œå‹•ä»»å‹™</b><br>
      â€¢ å®Œæˆå…¨éƒ¨ä»»å‹™æœƒç›´æ¥é€²å…¥ä¸‹ä¸€å¤©<br>
      â€¢ æ¯å®Œæˆä¸€å¤©å¯ç²å¾— XPï¼Œå‡ç´šå¾Œç‹—ç‹—æ›´å²å®³ï¼
    </p>
    <button id="introBtn">é–‹å§‹ç…§é¡§ç‹—ç‹—</button>
  </div>
</div>

<!-- æ–°çš„ä¸€å¤©å½ˆçª— -->
<div id="newDayModal" class="modal hidden">
  <div class="modal-content">
    <h2 id="newDayText"></h2>
    <button id="newDayBtn">ç¹¼çºŒ</button>
  </div>
</div>

<div class="container">
<h1>Pawtopia</h1>

<div id="namingArea">
  <h3>å¹«ç‹—ç‹—å–åå­—</h3>
  <input id="dogNameInput" placeholder="è¼¸å…¥åå­—" style="width:100%;padding:10px;border-radius:12px;border:1px solid #ddd" />

  <h3 style="margin-top:12px">é¸æ“‡å¤–è§€</h3>
  <div style="display:flex;gap:12px;justify-content:center">
    <img src="Kiss Me!!!!.jpg" data-dog="Kiss Me!!!!.jpg" class="dogChoice">
    <img src="ä¸‹è¼‰ (2).jpg" data-dog="ä¸‹è¼‰ (2).jpg" class="dogChoice">
    <img src="ä¸‹è¼‰ (3).jpg" data-dog="ä¸‹è¼‰ (3).jpg" class="dogChoice">
  </div>
  <button id="startBtn" style="width:100%;margin-top:16px">é–‹å§‹éŠæˆ²</button>
</div>

<div id="gameArea" style="display:none">
  <div class="meta">
    <div>
      <div id="dogTitle" style="font-weight:600"></div>
      <div class="small" id="dayDisplay">ç¬¬ 1 å¤©</div>
    </div>
    <div class="levelbox">Lv <span id="dogLevel">1</span></div>
  </div>

  <img id="mainDogImg" style="width:100%;border-radius:24px;margin-top:12px">

  <div class="stats">
    <div>ğŸ˜Š å¿«æ¨‚ <span id="happyValue">70</span>%<div class="bar"><div id="happyBar" class="fill" style="width:70%"></div></div></div>
    <div>ğŸ– é£½è¶³ <span id="hungerValue">30</span>%<div class="bar"><div id="hungerBar" class="fill" style="width:30%"></div></div></div>
    <div>âš¡ èƒ½é‡ <span id="energyValue">60</span>%<div class="bar"><div id="energyBar" class="fill" style="width:60%"></div></div></div>
  </div>

  <div class="actions">
    <button id="feedBtn">é¤µé£Ÿ</button>
    <button id="playBtn">ç©è€</button>
    <button id="sleepBtn">ç¡è¦º</button>
  </div>

  <div class="mission">
    <h3>ä»Šæ—¥ä»»å‹™</h3>
    <ul id="missionList"></ul>
    <p class="small">å®Œæˆå…¨éƒ¨ä»»å‹™å³å¯é€²å…¥ä¸‹ä¸€å¤©</p>
  </div>

  <div class="log">
    <h3>æ—¥èªŒ</h3>
    <ul id="logList"></ul>
  </div>
</div>
</div>

<script>
const dog={name:'',happiness:70,hunger:30,energy:60,level:1};
let day=1;
let selectedDogImg='';
let missions=[];

const el=id=>document.getElementById(id);
const log=m=>{const li=document.createElement('li');li.textContent=m;el('logList').prepend(li);};

function updateStats(){
  el('happyValue').textContent=dog.happiness;
  el('hungerValue').textContent=dog.hunger;
  el('energyValue').textContent=dog.energy;
  el('happyBar').style.width=dog.happiness+'%';
  el('hungerBar').style.width=dog.hunger+'%';
  el('energyBar').style.width=dog.energy+'%';
}

function renderMissions(){
  const ul=el('missionList'); ul.innerHTML='';
  missions.forEach(m=>{
    const li=document.createElement('li');
    li.innerHTML=`${m.text} <span>${m.done?"âœ”":""}</span>`;
    ul.appendChild(li);
  });
}

function generateMissions(){
  const actions=['é¤µé£Ÿ','ç©è€','ç¡è¦º'];
  missions=[];
  let counts={feed:0,play:0,sleep:0};
  while(missions.length<7){
    const r=Math.floor(Math.random()*3);
    if(Object.values(counts)[r]>=3) continue;
    counts[Object.keys(counts)[r]]++;
    missions.push({type:actions[r],done:false,text:actions[r]});
  }
  renderMissions();
}

function checkDayComplete(){
  if(missions.every(m=>m.done)) newDay();
}

function act(type){
  if(type==='é¤µé£Ÿ'){ dog.hunger=Math.min(100,dog.hunger+20); dog.happiness=Math.min(100,dog.happiness+5); }
  if(type==='ç©è€'){ dog.happiness=Math.min(100,dog.happiness+15); dog.energy=Math.max(0,dog.energy-15); }
  if(type==='ç¡è¦º'){ dog.energy=Math.min(100,dog.energy+30); }
  const m=missions.find(x=>x.type===type&&!x.done);
  if(m){ m.done=true; log(type+' å®Œæˆ'); }
  updateStats(); renderMissions(); checkDayComplete();
}

function newDay(){
  day++; dog.happiness=0;
  el('newDayText').textContent=`ğŸŒ… ç¬¬ ${day} å¤©é–‹å§‹ï¼`;
  el('newDayModal').classList.remove('hidden');
  generateMissions();
  el('dayDisplay').textContent=`ç¬¬ ${day} å¤©`;
}

el('newDayBtn').onclick=()=>el('newDayModal').classList.add('hidden');
el('introBtn').onclick=()=>el('introModal').classList.add('hidden');

['feed','play','sleep'].forEach((a,i)=>{
  el(a+'Btn').onclick=()=>act(['é¤µé£Ÿ','ç©è€','ç¡è¦º'][i]);
});

document.querySelectorAll('.dogChoice').forEach(img=>{
  img.onclick=()=>{
    selectedDogImg=img.dataset.dog;
    document.querySelectorAll('.dogChoice').forEach(i=>i.classList.remove('selected'));
    img.classList.add('selected');
  };
});

el('startBtn').onclick=()=>{
  const name=el('dogNameInput').value.trim();
  if(!name||!selectedDogImg){ alert('è«‹è¼¸å…¥åå­—ä¸¦é¸æ“‡å¤–è§€'); return; }
  dog.name=name;
  el('dogTitle').textContent=name;
  el('mainDogImg').src=selectedDogImg;
  el('namingArea').style.display='none';
  el('gameArea').style.display='block';
  el('introModal').classList.remove('hidden');
  generateMissions(); updateStats(); log(name+' é–‹å§‹å†’éšªï¼');
};
</script>
</body>
</html>
