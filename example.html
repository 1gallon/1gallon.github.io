<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Pawtopia å°ˆå±¬æ–¼ä½ çš„å°å¥¶ç‹—</title>
<style>
body { font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial; background:#f6f3ff; margin:0; padding:20px; }
.container { max-width:900px; margin:auto; background:white; padding:20px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.08);} 
.stats,.actions,.mission,.log{ margin-top:20px; }
.bar{ height:14px; background:#eee; border-radius:8px; overflow:hidden; margin-top:4px; }
.fill{ height:100%; background:#4caf50; transition:width .3s; }
button{ padding:8px 16px; border:none; border-radius:8px; cursor:pointer; background:#2563eb; color:white; }
.mission li{ background:#f3f3f3; padding:10px; border-radius:8px; margin-bottom:6px; display:flex; justify-content:space-between; }
.log ul{ max-height:160px; overflow-y:auto; padding-left:16px; }
.meta{ display:flex; gap:12px; align-items:center; }
.small{ font-size:.9rem; color:#555; }
.levelbox{ background:#fef3c7; padding:6px 10px; border-radius:8px; }
.xpbox{ background:#eef2ff; padding:6px 10px; border-radius:8px; }
.day-transition{ animation:flash .8s; }
@keyframes flash{ from{background:#fffabf;} to{background:transparent;} }
.modal.hidden{ display:none; }
.modal{ position:fixed; inset:0; background:rgba(0,0,0,.45); display:flex; justify-content:center; align-items:center; z-index:999; }
.modal-content{ background:white; padding:30px 40px; border-radius:16px; text-align:center; animation:pop .3s; }
@keyframes pop{ from{transform:scale(.7); opacity:0;} to{transform:scale(1); opacity:1;} }
.dogChoice{width:80px;height:80px;border-radius:14px;object-fit:cover;cursor:pointer;transition:transform .2s,border .2s;}
.dogChoice.selected{ border:3px solid #2563eb; transform:scale(1.1);}
</style>
</head>
<body>

<div id="newDayModal" class="modal hidden">
  <div class="modal-content">
    <h2 id="newDayText"></h2>
    <button id="newDayBtn">é–‹å§‹æ–°çš„ä¸€å¤©</button>
  </div>
</div>

<!-- éŠæˆ²ä»‹ç´¹å½ˆçª— -->
<div id="introModal" class="modal hidden">
  <div class="modal-content">
    <h2>ğŸ¶ æ­¡è¿ä¾†åˆ° Pawtopia</h2>
    <p style="line-height:1.6; text-align:left;">
      ãƒ»æ¯æ¬¡ <b>é¤µé£Ÿ / ç©è€ / ç¡è¦º</b> éƒ½ç®—ä¸€æ¬¡è¡Œå‹•<br>
      ãƒ»æ¯å¤©æœ€å¤šé€²è¡Œ <b>10 æ¬¡è¡Œå‹•</b>ï¼Œä¹‹å¾Œæœƒé€²å…¥æ–°çš„ä¸€å¤©<br><br>
      <b>ğŸ¯ æ¯æ—¥ä»»å‹™</b><br>
      ãƒ»æ¯å¤©éœ€è¦å®Œæˆå…± <b>5 æ¬¡</b> é¤µé£Ÿï¼‹ç©è€ï¼ˆæ¯”ä¾‹éš¨æ©Ÿï¼‰<br>
      ãƒ»å®Œæˆä¸€çµ„ä»»å‹™å¯ç²å¾— <b>1 XP</b><br><br>
      <b>â­ å‡ç´šæ–¹å¼</b><br>
      ãƒ»ç´¯ç© <b>3 XP</b> å³å¯å‡ 1 ç´š<br><br>
      <b>âš ï¸ æ³¨æ„</b><br>
      ãƒ»å¿«æ¨‚ã€é£½è¶³æ„Ÿã€èƒ½é‡éä½æœƒæœ‰è­¦å‘Š<br>
      ãƒ»é€²å…¥æ–°çš„ä¸€å¤©æ™‚ï¼Œå¿«æ¨‚å€¼æœƒæ­¸é›¶
    </p>
    <button id="introStartBtn">é–‹å§‹å†’éšª</button>
  </div>
</div>

<div class="container">
<h1>Pawtopia å°ˆå±¬æ–¼ä½ çš„å°å¥¶ç‹—</h1>

<div id="namingArea">
  <h2>æ›¿ä½ çš„å°å¥¶ç‹—å–åå­—</h2>
  <input id="dogNameInput" placeholder="è¼¸å…¥åå­—" />

  <h3>é¸æ“‡å¤–è§€</h3>
  <div style="display:flex; gap:12px; margin:10px 0;">
    <img src="Kiss Me!!!!.jpg" data-dog="Kiss Me!!!!.jpg" class="dogChoice" width="80">
    <img src="ä¸‹è¼‰ (2).jpg" data-dog="ä¸‹è¼‰ (2).jpg" class="dogChoice" width="80">
    <img src="ä¸‹è¼‰ (3).jpg" data-dog="ä¸‹è¼‰ (3).jpg" class="dogChoice" width="80">
  </div>
  <button id="startBtn">é–‹å§‹éŠæˆ²</button>
</div>

<div id="gameArea" style="display:none;">
  <div class="meta">
    <h2 id="dogTitle"></h2>
    <div class="levelbox">Lv <span id="dogLevel">1</span></div>
    <div class="xpbox">XP <span id="xpDisplay">0/3</span></div>
    <div class="small" id="dayDisplay">ç¬¬ 1 å¤©</div>
  </div>

  <img id="mainDogImg" style="margin-top:12px; border-radius:12px; width:200px;">

  <div class="stats">
    <div>å¿«æ¨‚ <span id="happyValue">70</span>%<div class="bar"><div id="happyBar" class="fill" style="width:70%"></div></div></div>
    <div>é£½è¶³æ„Ÿ <span id="hungerValue">30</span>%<div class="bar"><div id="hungerBar" class="fill" style="width:30%"></div></div></div>
    <div>èƒ½é‡ <span id="energyValue">60</span>%<div class="bar"><div id="energyBar" class="fill" style="width:60%"></div></div></div>
  </div>

  <div class="actions">
    <button id="feedBtn">é¤µé£Ÿ</button>
    <button id="playBtn">ç©è€</button>
    <button id="sleepBtn">ç¡è¦º</button>
  </div>

  <div class="mission">
    <h3>ä»Šæ—¥ä»»å‹™</h3>
    <ul>
      <li>é¤µé£Ÿ <span id="missionFeed">0/0</span></li>
      <li>ç©è€ <span id="missionPlay">0/0</span></li>
      <li>ç¡è¦º <span id="missionSleep">0/0</span></li>
    </ul>
    <p>å®Œæˆæ¬¡æ•¸ï¼š<span id="missionTotal">0</span></p>
  </div>

  <div class="log">
    <h3>æ—¥èªŒ</h3>
    <ul id="logList"></ul>
  </div>
</div>
</div>

<script>
const dog={name:'',happiness:70,hunger:30,energy:60,level:1};
let xp=0,day=1,actionCount=0,selectedDogImg='';
const mission={
  feedTarget:0,
  playTarget:0,
  sleepTarget:0,
  feedDone:0,
  playDone:0,
  sleepDone:0,
  completedCount:0
};
const el=id=>document.getElementById(id);
const log=m=>{const li=document.createElement('li');li.textContent=m;el('logList').prepend(li);};

function updateUI(){
  el('happyValue').textContent=dog.happiness;
  el('hungerValue').textContent=dog.hunger;
  el('energyValue').textContent=dog.energy;
  el('happyBar').style.width=dog.happiness+'%';
  el('hungerBar').style.width=dog.hunger+'%';
  el('energyBar').style.width=dog.energy+'%';
  el('dogLevel').textContent=dog.level;
  el('xpDisplay').textContent=`${xp}/3`;
  el('dayDisplay').textContent=`ç¬¬ ${day} å¤©`;
  el('missionFeed').textContent=`${mission.feedDone}/${mission.feedTarget}`;
  el('missionPlay').textContent=`${mission.playDone}/${mission.playTarget}`;
  el('missionSleep').textContent=`${mission.sleepDone}/${mission.sleepTarget}`;
  el('missionTotal').textContent=mission.completedCount;
}/3`;
  el('dayDisplay').textContent=`ç¬¬ ${day} å¤©`;
  el('missionFeed').textContent=`${mission.feedDone}/${mission.feedTarget}`;
  el('missionPlay').textContent=`${mission.playDone}/${mission.playTarget}`;
  el('missionTotal').textContent=mission.completedCount;
}

function newMission(){
  // ä¸€å¤© 7 å€‹ä»»å‹™ï¼Œä¸‰ç¨®è¡Œç‚ºéš¨æ©Ÿåˆ†é…ï¼Œé¿å…æ¥µç«¯ï¼ˆæ¯é …è‡³å°‘ 1ï¼‰
  let remaining = 7;
  mission.feedTarget = Math.floor(Math.random()*2)+1; // 1~2
  remaining -= mission.feedTarget;
  mission.playTarget = Math.floor(Math.random()*2)+1; // 1~2
  remaining -= mission.playTarget;
  mission.sleepTarget = remaining; // å‰©ä¸‹çµ¦ç¡è¦ºï¼ˆå¿…å®š >=1ï¼‰

  mission.feedDone = 0;
  mission.playDone = 0;
  mission.sleepDone = 0;
}

function checkMission(){
  if(
    mission.feedDone>=mission.feedTarget &&
    mission.playDone>=mission.playTarget &&
    mission.sleepDone>=mission.sleepTarget
  ){
    mission.completedCount++;
    xp++;
    log('ğŸ‰ ä»Šæ—¥ä»»å‹™å®Œæˆï¼ç²å¾— 1 XP');
    if(xp>=3){ xp=0; dog.level++; log(`â­ å‡ç´šåˆ° Lv.${dog.level}`); }
    newDay();
  }
}`); }
    newMission();
  }
}

function afterAction(){
  actionCount++;
  updateUI();
  checkWarnings();
  if(actionCount>=10) newDay();
}

function feed(){
  dog.hunger=Math.min(100,dog.hunger+20);
  dog.happiness=Math.min(100,dog.happiness+10);
  mission.feedDone++;
  log('é¤µé£Ÿ');
  checkMission();
  updateUI();
}
function play(){
  dog.happiness=Math.min(100,dog.happiness+15);
  dog.energy=Math.max(0,dog.energy-20);
  mission.playDone++;
  log('ç©è€');
  checkMission();
  updateUI();
}
function sleepDog(){
  dog.energy=Math.min(100,dog.energy+40);
  dog.hunger=Math.max(0,dog.hunger-10);
  mission.sleepDone++;
  log('ç¡è¦º');
  checkMission();
  updateUI();
}

function checkWarnings(){
  if(dog.happiness<=10) alert('âš ï¸ ç‹—ç‹—å¿ƒæƒ…å¾ˆä½è½ï¼å¿«é™ªç‰ ç©è€');
  if(dog.hunger<=10) alert('âš ï¸ ç‹—ç‹—å¾ˆé¤“äº†ï¼éœ€è¦é¤µé£Ÿ');
  if(dog.energy<=10) alert('âš ï¸ ç‹—ç‹—å¿«æ²’åŠ›æ°£äº†ï¼è©²ä¼‘æ¯äº†');
}

function newDay(){
  day++; actionCount=0; dog.happiness=0;
  el('newDayText').textContent=`ç¬¬ ${day} å¤©é–‹å§‹ï¼`;
  el('newDayModal').classList.remove('hidden');
  el('gameArea').classList.add('day-transition');
  setTimeout(()=>el('gameArea').classList.remove('day-transition'),800);
  newMission(); updateUI();
}

el('newDayBtn').onclick=()=>el('newDayModal').classList.add('hidden');

el('introStartBtn').onclick=()=>{
  el('introModal').classList.add('hidden');
  el('gameArea').style.display='block';
  log(`${dog.name} é–‹å§‹å†’éšªï¼`);
};

document.querySelectorAll('.dogChoice').forEach(img=>{
  img.onclick=()=>{
    selectedDogImg=img.dataset.dog;
    document.querySelectorAll('.dogChoice').forEach(i=>i.classList.remove('selected'));
    img.classList.add('selected');
  };
});

el('startBtn').onclick=()=>{
  const name=el('dogNameInput').value.trim();
  if(!name||!selectedDogImg){ alert('è«‹è¼¸å…¥åå­—ä¸¦é¸æ“‡å¤–è§€'); return; }
  dog.name=name;
  el('dogTitle').textContent=name;
  el('mainDogImg').src=selectedDogImg;
  el('namingArea').style.display='none';
  el('introModal').classList.remove('hidden');
  newMission();
  updateUI();
  log(`${name} é–‹å§‹å†’éšªï¼`);
};

el('feedBtn').onclick=feed;
el('playBtn').onclick=play;
el('sleepBtn').onclick=sleepDog;
updateUI();
</script>
</body>
</html>
